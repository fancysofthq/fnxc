class Signal
  private var state : Bool
  private var queue = Deque(Fiber).new

  def notify_all
  end

  def notify_one
  end

  def wait(fiber : Fiber)
    queue.push(fiber)
  end

  # Unlock the mutex and wait for the signal.
  # Signal delivery is guaranteed in this case.
  # TODO: Make it work.
  def wait(mutex : Mutex)
    const previous_state = state

    mutex.unlock

    if previous_state != state
      return
    else
      wait
    end
  end
end
